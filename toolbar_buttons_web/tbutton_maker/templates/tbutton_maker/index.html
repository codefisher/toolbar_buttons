{% extends "base.html" %}
{% load djangopress_tags %}

{% block head_tags %}
        <link type="text/css" rel="stylesheet" href="{% media_url %}themes/default/tbutton.css">
		<script type="text/javascript" src="{% media_url %}js/tbutton.js"></script>
{% endblock %}

{% block content %}

<form method="post" action="{% url tbutton-create %}" class="form-field">
	<fieldset>
		<legend>Locale &amp; Application</legend>
		<div class="form-field">
			<label for="button-locale">Locale
				<select name="button-locale" class="form-input">
					{% for value, name, native_name, country in local_data %}
						<option{% if value == locale %} selected{% endif %}
							value="{{ value }}" style="background: url('{% media_url %}images/flags/{{ country|lower }}.png') no-repeat left center; padding-left:20px;" alt="">{{ native_name}} [{{ value }}]</option>
					{% endfor %}
				</select>
			</label>
		</div>
		<fieldset>
			<legend>Application</legend>
			{% for value in all_applications %}
				<div class="form-field">
					<label for="button-application-{{ value }}">
						<input{% if value in applications %} checked="true"{% endif %} id="button-application-{{ value }}" value="{{ value }}" name="button-application"
							type="checkbox"><img src="{% media_url %}images/icons/{{ value }}.png"> {{ value|capfirst }}
					</label>
				</div>
			{% endfor %}
		</fieldset>
		<input type="submit" name="update-submit" value="Update">
	</fieldset>
	<fieldset>
		<legend>Buttons</legend>
		<ul id="button-list">
		{% for button, apps, label, tooltip, icon, description in button_data %}
			<li class="button-item">
				<label for="{{ button }}-checkbox">
					<input checked type="checkbox" id="{{ button }}-checkbox" name="button" value="{{ button }}">
					{% for app in apps %}
						<img src="{% media_url %}images/icons/{{ app }}.png">
					{% endfor %}
					<span class="button-name">{{ label|safe }}</span>
				</label>
				<div class="button-info"><img src="{% media_url %}images/pastel-svg/16/{{ icon }}" alt="">
					{{ description|linebreaks }}
				</div>
			</li>
		{% endfor %}
		</ul>
	</fieldset>
	<fieldset>
		<legend>Settings</legend>
		<div class="form-field">
			<label>
				<input type="checkbox" name="offer-download" value="true">
					Offer for download instead of installing.
			</label>
			<p>
				Normally extensions get installed into Firefox, but if you intend
				to install the created extension into Thunderbird etc. check this box
				and you will be prompted to download the extension instead.
			</p>
		</div>
		<div class="form-field">
			<label>
				<input type="checkbox" name="include-all-locales" value="true">
					Include all available locales.
			</label>
			<p>
				By default only the locale selected is included.  Check this and all
				locales will be included.
			</p>
		</div>
		{% csrf_token %}
		<input type="hidden" name="locale" value="{{ locale }}">
		<input type="hidden" name="application" value="{{ applications|join:"," }}">
		<input type="submit" name="create-submit" value="Submit">
	</fieldset>
</form>
{% endblock %}